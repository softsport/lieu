/*!
 * Lieu v1.3.0 (https://github.com/LeadrateMSK/lieu#readme)
 * Copyright 2022 LeadrateMSK <web@leadrate.pro>
 * Licensed under MIT (https://github.com/LeadrateMSK/lieu/blob/master/LICENSE)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).lieu=e()}(this,(function(){"use strict";class t{static isObject(t){return"object"==typeof t}static isFunction(t){return"function"==typeof t}static fromJson(t){try{const e=JSON.parse(t);return this.isObject(e)?e:null}catch{return null}}static getBrowserLang(){return navigator.language.slice(0,2)}static hasKey(t,e){return-1!==Object.keys(e).indexOf(t)}static findAllSubstrings(t){const e=/\|[[{\d+]/g,a=[];return function t(i){const n=i.search(e);-1!==n?(a.push(i.substring(0,n)),t(i.substring(n+1))):a.push(i)}(t),a}static pluralizeString(t,e){const a=/[[{]\d+,{0,1}\d{0,}\*{0,1}[\]}]/g,i=this.findAllSubstrings(t);let n;for(let t=0;t<i.length;t++){const s=i[t],r=s.match(a);if(r){if(!n){n=s.replace(a,"");continue}const t=[];if(t.push(...r[0].replace(/[[{]|[\]}]/g,"").split(",")),t.length>=2){if("*"===t[1]&&e>=t[0]){n=s.replace(a,"");break}if(t[0]<=e&&t[1]>=e){n=s.replace(a,"");break}}else if(t[0]===e){n=s.replace(a,"");break}}}return n}}const e="lieu";return class{#t=!1;#e=null;#a=null;#i=null;#n;#s=(t,e)=>{};#r=()=>{};constructor(t){this.#e=t,this.#t=t.isDebug,this.#u()}#u(){this.#l(),this.#g(),this.#o(),this.#c()}#l(){let e=this.#e.languages;t.isObject(e)||(e=t.fromJson(e)),this.#a=e}#c(){t.isFunction(this.#e.onSetLang)&&(this.#s=this.#e.onSetLang),t.isFunction(this.#e.onGetLang)&&(this.#r=this.#e.onGetLang)}#g(){this.#n=this.#e.attributeName??"data-lieu"}#o(){const a=localStorage.getItem(e)??this.#e.initialLanguage??t.getBrowserLang();t.hasKey(a,this.#a)?this.setLang(a):this.setLang(Object.keys(this.#a)[0])}setLang(a){const i=this.#a[a],n=this.#i;t.hasKey(a,this.#a)?(this.#i=i,localStorage.setItem(e,a),this.#h(),this.#s(n,i)):console.error(`Lieu | Language key "${a}" not found in languages!`)}#h(){Array.from(document.querySelectorAll(`[${this.#n}]`)).forEach((t=>{const e=t.getAttributeNames();let a,i;const n={};e.forEach((e=>{if(e.includes(this.#n.toLowerCase())){const s=t.getAttribute(e);if(e===this.#n)a=s;else if(e.includes("plural")&&!isNaN(s))i=Number(s);else{const t=e.replace(`${this.#n.toLowerCase()}-`,"");n[t]=s}}})),t.innerHTML=this.trans(a,n,i)}))}trans(e,a,i){const{locales:n}=this.#i,s=[a,i];let r,u,l=n[e];return t.isObject(s[0])?(r=s[0],u=s[1]):(r=s[1],u=s[0]),l||(l=e,this.#t&&console.warn(`Lieu | Locale key "${e}" not found in current language!`)),r&&(l=l.replace(/%\{(.*?)\}/g,((t,e)=>r[e]||t))),u&&(l=t.pluralizeString(l,u)),l}getLang(e){return this.#r(),e?t.hasKey(e,this.#a)?this.#a[e]:void console.error(`Lieu | Language key "${e}" not found in languages!`):this.#i}getLangs(){return this.#a}}}));
//# sourceMappingURL=lieu.umd.min.js.map
